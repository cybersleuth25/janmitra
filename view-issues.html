<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Issues - JanMitra</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar animate-in">
        <div class="nav-container">
            <div class="nav-logo"><a href="index.html" style="text-decoration:none;"><h2>JanMitra</h2></a></div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="report-issue.html" class="nav-link">Report Issue</a></li>
                <li><a href="view-issues.html" class="nav-link active">View Issues</a></li>
                <li><a href="volunteers.html" class="nav-link">Volunteers</a></li>
                <li><a href="admin/login.html" class="admin-link"><i class="fas fa-lock"></i> Admin</a></li>
            </ul>
            <div class="hamburger"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div>
        </div>
    </nav>

    <section class="page-header" style="padding-top: 4rem; text-align: center;">
        <div class="container animate-in delay-100">
            <h1>Community Issues</h1>
            <p>Track the progress of reported issues in our neighborhood.</p>
        </div>
    </section>

    <section class="filters-section animate-in delay-200">
        <div class="container">
            <div class="form-container" style="padding: 1.5rem; margin-bottom: 2rem;">
                <div class="filters-container" style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-end;">
                    <div class="form-group" style="flex: 1; min-width: 200px; margin-bottom: 0;">
                        <label>Status</label>
                        <select id="statusFilter" onchange="filterIssues()">
                            <option value="all">All Statuses</option>
                            <option value="open">Open</option>
                            <option value="in_progress">In Progress</option>
                            <option value="resolved">Resolved</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1; min-width: 200px; margin-bottom: 0;">
                        <label>Category</label>
                        <select id="categoryFilter" onchange="filterIssues()">
                            <option value="all">All Categories</option>
                            <option value="pothole">Pothole</option>
                            <option value="streetlight">Street Light</option>
                            <option value="water_supply">Water Supply</option>
                            <option value="garbage">Garbage</option>
                            <option value="public_transport">Transport</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 2; min-width: 300px; margin-bottom: 0;">
                        <label>Search</label>
                        <input type="text" id="searchInput" placeholder="Search details..." onkeyup="filterIssues()">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="issues-section animate-in delay-300">
        <div class="container">
            <div class="issues-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.5rem; margin:0;">Latest Reports</h2>
                <div class="issues-count" style="color: var(--text-light);"><span id="issuesCount">0</span> issues found</div>
            </div>
            
            <div id="issuesList" class="issues-list">
                <div class="text-center" style="grid-column: 1/-1; padding: 3rem;">
                    <i class="fas fa-spinner fa-spin fa-2x" style="color: var(--primary-color);"></i>
                    <p class="mt-2">Loading community issues...</p>
                </div>
            </div>

            <div id="pagination" class="pagination" style="margin-top: 3rem; display: flex; justify-content: center; gap: 0.5rem;"></div>
        </div>
    </section>

    <div id="issueModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Issue Details</h2>
                <span class="close" onclick="closeIssueModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; background: #f8fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div><strong>ID:</strong> <span id="detailId"></span></div>
                    <div><strong>Status:</strong> <span id="detailStatus"></span></div>
                    <div><strong>Category:</strong> <span id="detailCategory"></span></div>
                    <div><strong>Date:</strong> <span id="detailDate"></span></div>
                </div>
                
                <div class="content-section">
                    <h4>Description</h4>
                    <p id="detailDescription"></p>
                </div>

                <div class="content-section">
                    <h4>Location</h4>
                    <p id="detailAddress"></p>
                </div>
                
                <div id="detailPhotoContainer" style="display:none; margin-top: 1rem;">
                    <img id="detailPhoto" style="width: 100%; border-radius: 8px;" alt="Issue Photo">
                </div>
            </div>
            <div class="modal-footer" style="margin-top: 2rem; text-align: right;">
                <button class="btn btn-secondary" onclick="closeIssueModal()">Close</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 JanMitra - Local Issues Reporter</p>
        </div>
    </footer>

    <script src="js/data-manager.js"></script>
    <script src="js/main.js"></script>
    <script src="js/view-issues.js"></script>
</body>
</html>